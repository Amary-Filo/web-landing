@use "sass:map";

// Core + component token defaults for the NG Primitives kit.
// The idea is that every component consumes token-level CSS variables so you
// can theme everything from a single place or override individual tokens per component.

:root,
.ngp-theme,
.ngp-theme-base {
  /* Layout */
  --ngp-font-family: var(--text-font, "Inter", sans-serif);
  --ngp-radius-xs: 4px;
  --ngp-radius-sm: 6px;
  --ngp-radius-md: 10px;
  --ngp-radius-lg: 16px;

  --ngp-spacing-2xs: 0.25rem;
  --ngp-spacing-xs: 0.375rem;
  --ngp-spacing-sm: 0.5rem;
  --ngp-spacing-md: 0.75rem;
  --ngp-spacing-lg: 1rem;
  --ngp-spacing-xl: 1.5rem;

  --ngp-border-width: 1px;

  /* Surfaces & color system */
  --ngp-surface-0: rgba(12, 12, 17, 0.65);
  --ngp-surface-1: rgba(12, 12, 17, 0.85);
  --ngp-surface-2: rgba(27, 28, 36, 0.9);
  --ngp-surface-3: rgba(43, 45, 56, 0.92);
  --ngp-surface-overlay: rgba(8, 8, 12, 0.65);
  --ngp-surface-elevated: rgba(20, 21, 34, 0.95);

  --ngp-border-color: rgba(255, 255, 255, 0.12);
  --ngp-border-strong: rgba(255, 255, 255, 0.28);
  --ngp-border-muted: rgba(255, 255, 255, 0.08);

  --ngp-text-primary: rgba(255, 255, 255, 0.95);
  --ngp-text-basic: rgba(225, 226, 236, 0.92);
  --ngp-text-muted: rgba(225, 226, 236, 0.62);
  --ngp-text-inverse: #13131f;
  --ngp-text-disabled: rgba(225, 226, 236, 0.32);

  --ngp-accent: #7c5cff;
  --ngp-accent-soft: rgba(124, 92, 255, 0.18);
  --ngp-accent-contrast: #f2f3ff;
  --ngp-accent-strong: #b388ff;
  --ngp-focus-ring: 0 0 0 2px rgba(124, 92, 255, 0.4);

  --ngp-success: #3ccf91;
  --ngp-success-soft: rgba(60, 207, 145, 0.18);
  --ngp-danger: #ff3b6b;
  --ngp-danger-soft: rgba(255, 59, 107, 0.18);
  --ngp-warning: #ffb347;
  --ngp-warning-soft: rgba(255, 179, 71, 0.18);

  --ngp-shadow-soft: 0 12px 32px rgba(6, 8, 18, 0.35);
  --ngp-shadow-hard: 0 18px 48px rgba(6, 8, 18, 0.55);

  /* Shared control tokens */
  --ngp-control-height: 2.75rem;
  --ngp-control-bg: var(--ngp-surface-2);
  --ngp-control-bg-hover: rgba(124, 92, 255, 0.12);
  --ngp-control-bg-active: rgba(124, 92, 255, 0.18);
  --ngp-control-border: var(--ngp-border-color);
  --ngp-control-border-hover: rgba(255, 255, 255, 0.2);
  --ngp-control-border-active: rgba(124, 92, 255, 0.4);
  --ngp-control-text: var(--ngp-text-basic);
  --ngp-control-placeholder: var(--ngp-text-muted);
  --ngp-control-disabled-border: rgba(255, 255, 255, 0.1);

  /* Select */
  --select-bg: var(--ngp-control-bg);
  --select-color: var(--ngp-control-text);
  --select-placeholder: var(--ngp-control-placeholder);
  --select-border: var(--ngp-control-border);
  --select-border-hover: var(--ngp-control-border-hover);
  --select-border-active: var(--ngp-control-border-active);
  --select-radius: var(--ngp-radius-md);
  --select-padding-y: var(--ngp-spacing-xs);
  --select-padding-x: calc(var(--ngp-spacing-md) + 0.125rem);
  --select-chevron-size: 0.75rem;
  --select-trigger-gap: var(--ngp-spacing-sm);
  --select-option-color: var(--ngp-text-basic);
  --select-option-bg-hover: rgba(255, 255, 255, 0.08);
  --select-option-bg-selected: rgba(124, 92, 255, 0.22);
  --select-option-color-selected: var(--ngp-accent-strong);
  --select-option-radius: var(--ngp-radius-sm);
  --select-option-padding-y: 0.55rem;
  --select-option-padding-x: var(--ngp-spacing-md);
  --select-panel-bg: var(--ngp-surface-elevated);
  --select-panel-border: var(--ngp-border-color);
  --select-panel-shadow: var(--ngp-shadow-soft);
  --select-panel-max-height: 16rem;

  /* Combobox */
  --combobox-bg: var(--select-bg);
  --combobox-color: var(--select-color);
  --combobox-border: var(--select-border);
  --combobox-radius: var(--select-radius);
  --combobox-toggle-size: 2.25rem;
  --combobox-input-padding-y: var(--select-padding-y);
  --combobox-input-padding-x: var(--select-padding-x);
  --combobox-option-bg-hover: var(--select-option-bg-hover);
  --combobox-option-bg-selected: var(--select-option-bg-selected);
  --combobox-chips-bg: rgba(255, 255, 255, 0.08);
  --combobox-chips-color: var(--ngp-text-primary);

  /* Radio */
  --radio-bg: var(--ngp-control-bg);
  --radio-border: var(--ngp-control-border);
  --radio-border-hover: var(--ngp-control-border-hover);
  --radio-dot-color: var(--ngp-accent);
  --radio-label-color: var(--ngp-control-text);
  --radio-gap: var(--ngp-spacing-sm);
  --radio-radius: var(--ngp-radius-sm);
  --radio-focus-ring: var(--ngp-focus-ring);

  /* Checkbox */
  --checkbox-bg: var(--radio-bg);
  --checkbox-border: var(--radio-border);
  --checkbox-border-hover: var(--radio-border-hover);
  --checkbox-check-color: var(--ngp-accent-contrast);
  --checkbox-check-bg: var(--ngp-accent);
  --checkbox-label-color: var(--radio-label-color);
  --checkbox-radius: var(--ngp-radius-sm);

  /* Switch / Toggle */
  --switch-bg-off: rgba(255, 255, 255, 0.08);
  --switch-bg-on: var(--ngp-accent);
  --switch-handle-bg: #101323;
  --switch-handle-bg-on: var(--ngp-accent-contrast);
  --switch-handle-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.12), 0 4px 12px rgba(4, 5, 12, 0.4);

  --toggle-bg-off: var(--ngp-control-bg);
  --toggle-bg-on: var(--ngp-accent);
  --toggle-color-off: var(--ngp-text-muted);
  --toggle-color-on: var(--ngp-accent-contrast);
  --toggle-border: var(--ngp-control-border);
  --toggle-radius: var(--ngp-radius-sm);

  /* Tabs */
  --tabs-bg: transparent;
  --tabs-border: var(--ngp-border-muted);
  --tabs-indicator-color: var(--ngp-accent);
  --tabs-indicator-radius: 999px;
  --tabs-padding-x: var(--ngp-spacing-md);
  --tabs-padding-y: var(--ngp-spacing-xs);
  --tabs-gap: var(--ngp-spacing-sm);

  /* Dialog */
  --dialog-backdrop: rgba(2, 4, 12, 0.65);
  --dialog-surface: var(--ngp-surface-elevated);
  --dialog-border: var(--ngp-border-strong);
  --dialog-radius: var(--ngp-radius-lg);
  --dialog-shadow: var(--ngp-shadow-hard);
  --dialog-content-gap: var(--ngp-spacing-md);
  --dialog-header-color: var(--ngp-text-primary);
  --dialog-body-color: var(--ngp-text-basic);
  --dialog-footer-bg: rgba(255, 255, 255, 0.04);
  --dialog-close-color: var(--ngp-text-muted);
  --dialog-close-color-hover: var(--ngp-text-primary);

  /* Focus ring fallback */
  --ngp-focus-outline: 2px solid rgba(124, 92, 255, 0.75);
}

/* Theme helpers */
@mixin ngp-theme($selector, $tokens) {
  #{$selector} {
    @each $key, $value in $tokens {
      --#{unquote($key)}: #{$value};
    }
  }
}

@mixin ngp-register-component-theme($selector, $tokens) {
  @include ngp-theme($selector, $tokens);
}

/* Brand theme */
body.ngp-theme-brand,
.ngp-theme-brand {
  --ngp-surface-0: #060917;
  --ngp-surface-1: #0a1021;
  --ngp-surface-2: #11172d;
  --ngp-surface-3: #1d2743;
  --ngp-surface-overlay: rgba(4, 6, 16, 0.68);
  --ngp-surface-elevated: #202b4a;

  --ngp-border-color: rgba(122, 190, 255, 0.24);
  --ngp-border-strong: rgba(122, 190, 255, 0.36);
  --ngp-border-muted: rgba(122, 190, 255, 0.12);

  --ngp-text-primary: #f6fbff;
  --ngp-text-basic: #dbeafd;
  --ngp-text-muted: rgba(219, 234, 253, 0.62);
  --ngp-text-disabled: rgba(219, 234, 253, 0.28);
  --ngp-text-inverse: #040810;

  --ngp-accent: #4f46e5;
  --ngp-accent-strong: #818cf8;
  --ngp-accent-soft: rgba(79, 70, 229, 0.22);
  --ngp-accent-contrast: #f8fafc;
  --ngp-focus-ring: 0 0 0 2px rgba(79, 70, 229, 0.45);

  --ngp-success: #059669;
  --ngp-success-soft: rgba(5, 150, 105, 0.22);
  --ngp-warning: #f59e0b;
  --ngp-warning-soft: rgba(245, 158, 11, 0.22);
  --ngp-danger: #ef4444;
  --ngp-danger-soft: rgba(239, 68, 68, 0.22);

  --select-option-bg-hover: rgba(74, 222, 255, 0.1);
  --select-option-bg-selected: rgba(129, 140, 248, 0.22);
  --dialog-backdrop: rgba(6, 10, 30, 0.74);
}

/* Halloween sample theme */
body.ngp-theme-halloween,
.ngp-theme-halloween {
  --ngp-surface-0: #170e27;
  --ngp-surface-1: #1f1233;
  --ngp-surface-2: #2b1843;
  --ngp-surface-3: #3a1f59;
  --ngp-surface-overlay: rgba(20, 8, 38, 0.7);
  --ngp-surface-elevated: #461f63;

  --ngp-border-color: rgba(255, 149, 0, 0.22);
  --ngp-border-strong: rgba(255, 149, 0, 0.38);
  --ngp-border-muted: rgba(255, 149, 0, 0.12);

  --ngp-text-primary: #fff5d6;
  --ngp-text-basic: rgba(255, 245, 214, 0.92);
  --ngp-text-muted: rgba(255, 245, 214, 0.62);
  --ngp-text-inverse: #1d0e2d;

  --ngp-accent: #ff6b1a;
  --ngp-accent-strong: #ffc53d;
  --ngp-accent-soft: rgba(255, 107, 26, 0.25);
  --ngp-accent-contrast: #2b0f33;
  --ngp-focus-ring: 0 0 0 2px rgba(255, 149, 0, 0.45);

  --switch-bg-on: #ff6b1a;
  --toggle-bg-on: #ff6b1a;
  --select-option-bg-selected: rgba(255, 149, 0, 0.25);
  --dialog-backdrop: rgba(20, 8, 38, 0.82);
}

/* Light / secondary theme */
body.ngp-theme-light,
.ngp-theme-light,
.theme-secondary {
  --ngp-surface-0: #ffffff;
  --ngp-surface-1: #fbfcff;
  --ngp-surface-2: #f4f7fb;
  --ngp-surface-3: #eaedf7;
  --ngp-surface-overlay: rgba(7, 11, 20, 0.32);
  --ngp-surface-elevated: #ffffff;

  --ngp-border-color: rgba(15, 23, 42, 0.07);
  --ngp-border-strong: rgba(15, 23, 42, 0.12);
  --ngp-border-muted: rgba(15, 23, 42, 0.05);

  --ngp-text-primary: #111827;
  --ngp-text-basic: #1f2937;
  --ngp-text-muted: rgba(17, 24, 39, 0.58);
  --ngp-text-disabled: rgba(17, 24, 39, 0.32);
  --ngp-text-inverse: #f8fafc;

  --ngp-accent: #2563eb;
  --ngp-accent-strong: #60a5fa;
  --ngp-accent-soft: rgba(37, 99, 235, 0.18);
  --ngp-accent-contrast: #f8fafc;

  --ngp-control-bg: #ffffff;
  --ngp-control-bg-hover: rgba(37, 99, 235, 0.08);
  --ngp-control-bg-active: rgba(37, 99, 235, 0.14);
  --ngp-control-border: rgba(15, 23, 42, 0.12);
  --ngp-control-border-hover: rgba(15, 23, 42, 0.18);
  --ngp-control-border-active: rgba(37, 99, 235, 0.35);
  --ngp-control-text: var(--ngp-text-basic);
  --ngp-control-placeholder: rgba(17, 24, 39, 0.42);

  --select-option-bg-hover: rgba(37, 99, 235, 0.08);
  --select-option-bg-selected: rgba(96, 165, 250, 0.2);
  --dialog-backdrop: rgba(15, 23, 42, 0.45);
}

/* Utility selectors for per-component overrides */
[class*="theme-"] ngp-select,
[class*="theme-"] ngp-combobox,
[class*="theme-"] ngp-radio-group,
[class*="theme-"] ngp-checkbox-group,
[class*="theme-"] ngp-switch,
[class*="theme-"] ngp-toggle,
[class*="theme-"] ngp-tabs,
[class*="theme-"] ngp-dialog {
  font-family: var(--ngp-font-family);
}

/* Example component-specific theme hooks */
ngp-select.theme-brand,
.theme-brand ngp-select {
  --select-bg: var(--ngp-control-bg, #11172d);
  --select-option-bg-selected: var(--ngp-accent-soft);
}

ngp-select.theme-halloween,
.theme-halloween ngp-select {
  --select-bg: var(--ngp-control-bg, #2b1843);
  --select-border: rgba(255, 149, 0, 0.35);
  --select-option-bg-hover: rgba(255, 149, 0, 0.18);
}

ngp-dialog.theme-brand,
.theme-brand ngp-dialog {
  --dialog-surface: rgba(25, 34, 68, 0.95);
  --dialog-header-color: var(--ngp-text-primary);
}

ngp-dialog.theme-halloween,
.theme-halloween ngp-dialog {
  --dialog-surface: rgba(56, 24, 74, 0.95);
  --dialog-footer-bg: rgba(255, 149, 0, 0.08);
}

